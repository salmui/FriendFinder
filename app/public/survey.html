<!DOCTYPE html>
<html lang="en">
<html>

<head>
    <meta charset="UTF-8">
    <!-- materialize -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <!-- materialize icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
       <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
    <title>Friend Finder Survey</title>
</head>

<body class="body">



    <div class="card-panel indigo lighten-2"> </div>
    <div class="container">

        <h2>Friend Finder Survey</h2>
        <hr>
        <br>

        <h4><strong>About You</strong></h4>
        <h5>Name (Required)</h5>

        <input type="text" name="" id="name" class="form-control" required>

        <h5>Link to Photo Image (Required)</h5>
        <input type="text" name="" id="photo" class="form-control" required>
        <br>
        <br>



        <div class="quest">
          <h4>Question 1</h4>
          <h5>You are caring and sympathetic.</h5>
          <select class="browser-default" id="q1" type="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <br><br>
        <div class="quest">
          <h4>Question 2</h4>
          <h5>You are optimistic about most things.</h5>
          <select class="browser-default" id="q2" type="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <br><br>
        <div class="quest">
          <h4>Question 3</h4>
          <h5>You are honest and friendly.</h5>
          <select class="browser-default" id="q3" type="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <br><br>
        <div class="quest">
          <h4>Question 4</h4>
          <h5>You care about what others think.</h5>
          <select class="browser-default" id="q4" type="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <br><br>
        <div class="quest">
          <h4>Question 5</h4>
          <h5>You like to compare yourself to others.</h5>
          <select class="browser-default" id="q5" type="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <br><br>
        <div class="quest">
          <h4>Question 6</h4>
          <h5>You are driven and self-motivated.</h5>
          <select class="browser-default" id="q6" type="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <br><br>
        <div class="quest">
          <h4>Question 7</h4>
          <h5>You are open to trying new things.</h5>
          <select class="browser-default" id="q7" type="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <br><br>
        <div class="quest">
          <h4>Question 8</h4>
          <h5>You like being around large groups.</h5>
          <select class="browser-default" id="q8" type="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <br><br>
        <div class="quest">
          <h4>Question 9</h4>
          <h5>You enjoy alone time.</h5>
          <select class="browser-default" id="q9" type="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <br><br>
        <div class="quest">
          <h4>Question 10</h4>
          <h5>You are happy most of the time.</h5>
          <select class="browser-default" id="q10" type="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>



        <br>
        <br>

        <!-- Materialize Modal Trigger/Submit Button -->
        <button type ="submit" data-target="modal1" class="waves-effect waves-light btn modal-trigger indigo lighten-1" id="submitBtn">Submit</button>
    </div>
</div>
<div class='col s4'>
    <p><a href='/api/friends'>API Friends List</a> | <a href='https://github.com/salmui/FriendFinder' target='_blank'>GitHub Repo</a></p>
</div>

    <!-- Materialize Modal Structure -->
    <div id="modal1" class="modal">
      <div class="modal-content">
        <h4>Meet your match!</h4>
        <h5 id="matchName"></h5>
        <img id="matchPic" src="" alt="No Image" width = 250px>
      </div>
    <div class="modal-footer">
      <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Done</a>
    </div>
  </div>

</div>

<!-- Grabs information and sends it to server -->
<script type="text/javascript">
$(document).ready(function() {
$("#submitBtn").on("click", function() {
    //form validation
    function validateForm() {
        var isValid = true;
        $('.validate').each(function() {
            if ($(this).val() === ''){
                isValid = false;
            }
        });
        $('.browser-default').each(function() {
            if ($(this).val() === ""){
                isValid = false;
            }
        });
        return isValid;
    }
    //if entire survey is filled out
    if (validateForm() == true) {
        //creates a new friend from the values submitted
        var newFriend = {
            name: $('#name').val().trim(),
            profilePic: $('#photo').val().trim(),
            scores: [
                $('#q1').val(),
                $('#q2').val(),
                $('#q3').val(),
                $('#q4').val(),
                $('#q5').val(),
                $('#q6').val(),
                $('#q7').val(),
                $('#q8').val(),
                $('#q9').val(),
                $('#q10').val(),
            ]
        };
        //Grabs current URL of website
        var currentURL = window.location.origin;
        //AJAX posts the data to friends API.
        $.post(currentURL + "/api/friends", newFriend, function(data) {
            //Grab the result from the AJAX post so that the best match's name and photo are displayed.
            $("#matchName").text(data.name);
            $("#matchPic").attr("src", data.profilePic);
        });
        // Show the modal with the best match
            $('.modal').modal();
        //clear form after submission
        $('#name').val("");
        $('#photo').val("");
        $('#q1').val("");
        $('#q2').val("");
        $('#q3').val("");
        $('#q4').val("");
        $('#q5').val("");
        $('#q6').val("");
        $('#q7').val("");
        $('#q8').val("");
        $('#q9').val("");
        $('#q10').val("");
    } else {
        alert("Please fill out ALL fields.")
    }
    // return false;
});
});
</script>
</body>

</html>
